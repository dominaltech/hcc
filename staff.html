<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Meet the dedicated and experienced faculty at HCC High School, Solapur. Our expert teachers are committed to student excellence and holistic development.">
    <meta name="keywords" content="HCC High School Staff, Teachers, Faculty, Solapur School Teachers">
    <meta name="theme-color" content="#220707">
    <title>Our Faculty & Staff | HCC High School, Solapur</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --maroon-dark: #220707;
            --maroon-primary: #531C22;
            --neutral-warm: #AC9185;
            --neutral-light: #E7D8CA;
            --bg-light: #F9F3ED;
            --white: #FFFFFF;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--bg-light);
            color: var(--maroon-dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Header & Navigation */
        header {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(249, 243, 237, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(34, 7, 7, 0.08);
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-placeholder {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--maroon-primary), var(--maroon-dark));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--white);
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .logo-placeholder:hover {
            transform: rotate(5deg) scale(1.05);
        }

        .school-name {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--maroon-dark);
        }

        .school-location {
            font-size: 0.85rem;
            color: var(--neutral-warm);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 2.5rem;
        }

        nav a {
            text-decoration: none;
            color: var(--maroon-dark);
            font-weight: 500;
            font-size: 0.95rem;
            position: relative;
            transition: color 0.3s ease;
        }

        nav a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--maroon-primary);
            transition: width 0.3s ease;
        }

        nav a:hover, nav a.active {
            color: var(--maroon-primary);
        }

        nav a:hover::after, nav a.active::after {
            width: 100%;
        }

        .hamburger {
            display: none;
            flex-direction: column;
            gap: 5px;
            cursor: pointer;
            padding: 8px;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: var(--maroon-dark);
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(8px, 8px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }

        /* Page Header */
        .page-header {
            margin-top: 80px;
            padding: 5rem 2rem;
            background: linear-gradient(135deg, var(--maroon-dark) 0%, var(--maroon-primary) 100%);
            text-align: center;
            color: var(--white);
            position: relative;
            overflow: hidden;
        }

        .page-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            border-radius: 50%;
        }

        .page-header h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            animation: fadeInUp 0.8s ease;
            position: relative;
            z-index: 1;
        }

        .page-header p {
            font-size: 1.3rem;
            opacity: 0.95;
            max-width: 800px;
            margin: 0 auto;
            animation: fadeInUp 0.8s ease 0.2s backwards;
            position: relative;
            z-index: 1;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Introduction Section */
        .intro-section {
            max-width: 1200px;
            margin: 0 auto;
            padding: 5rem 2rem 3rem;
            text-align: center;
        }

        .intro-section h2 {
            font-size: 2.5rem;
            color: var(--maroon-dark);
            margin-bottom: 1.5rem;
        }

        .intro-section p {
            font-size: 1.15rem;
            color: var(--neutral-warm);
            line-height: 1.9;
            margin-bottom: 1.5rem;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Leadership Section */
        .leadership-section {
            background: var(--white);
            padding: 5rem 2rem;
            margin-bottom: 3rem;
        }

        .leadership-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            color: var(--maroon-dark);
            margin-bottom: 3rem;
        }

        .leadership-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 3rem;
        }

        .leader-card {
            background: var(--bg-light);
            border-radius: 16px;
            padding: 2.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: all 0.4s ease;
            border: 2px solid transparent;
        }

        .leader-card:hover {
            border-color: var(--maroon-primary);
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(83, 28, 34, 0.15);
        }

        .leader-image {
            width: 180px;
            height: 180px;
            background: linear-gradient(135deg, var(--neutral-light), var(--neutral-warm));
            border-radius: 50%;
            margin-bottom: 1.5rem;
            border: 4px solid var(--white);
            box-shadow: 0 10px 30px rgba(34, 7, 7, 0.15);
            overflow: hidden;
        }

        .leader-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            image-rendering: -webkit-optimize-contrast;
        }

        .leader-name {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--maroon-dark);
            margin-bottom: 0.5rem;
        }

        .leader-title {
            font-size: 1.2rem;
            color: var(--maroon-primary);
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .leader-bio {
            font-size: 1rem;
            color: var(--neutral-warm);
            line-height: 1.8;
        }

        /* Filter Tabs */
        .filter-section {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.8rem 2rem;
            border: 2px solid var(--maroon-primary);
            background: transparent;
            color: var(--maroon-primary);
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn:hover, .filter-btn.active {
            background: var(--maroon-primary);
            color: var(--white);
            transform: translateY(-2px);
        }

        /* Staff Grid */
        .staff-section {
            max-width: 1400px;
            margin: 0 auto;
            padding: 3rem 2rem 5rem;
        }

        .staff-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2.5rem;
        }

        .staff-card {
            background: var(--white);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(34, 7, 7, 0.1);
            transition: all 0.4s ease;
            cursor: pointer;
        }

        .staff-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(83, 28, 34, 0.2);
        }

        .staff-image {
            width: 100%;
            height: 320px;
            background: linear-gradient(135deg, var(--neutral-light), var(--neutral-warm));
            position: relative;
            overflow: hidden;
        }

        .staff-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            transition: transform 0.4s ease;
            image-rendering: -webkit-optimize-contrast;
        }

        .staff-card:hover .staff-image img {
            transform: scale(1.08);
        }

        .staff-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--maroon-primary);
            color: var(--white);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(83, 28, 34, 0.3);
        }

        .staff-info {
            padding: 2rem;
        }

        .staff-name {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--maroon-dark);
            margin-bottom: 0.5rem;
        }

        .staff-designation {
            font-size: 1.1rem;
            color: var(--maroon-primary);
            font-weight: 600;
            margin-bottom: 0.8rem;
        }

        .staff-details {
            display: flex;
            flex-direction: column;
            gap: 0.6rem;
            margin-bottom: 1rem;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 0.95rem;
            color: var(--neutral-warm);
        }

        .detail-icon {
            width: 20px;
            height: 20px;
            background: var(--bg-light);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .staff-bio {
            font-size: 0.95rem;
            color: var(--neutral-warm);
            line-height: 1.7;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--neutral-light);
        }

        /* Stats Section */
        .stats-section {
            background: linear-gradient(135deg, var(--maroon-dark) 0%, var(--maroon-primary) 100%);
            padding: 4rem 2rem;
            color: var(--white);
            margin-top: 3rem;
        }

        .stats-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 3rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        /* Footer */
        footer {
            background: var(--maroon-dark);
            color: var(--bg-light);
            padding: 3rem 2rem 1.5rem;
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            color: var(--white);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .footer-section p, .footer-section a {
            color: var(--neutral-light);
            text-decoration: none;
            display: block;
            margin-bottom: 0.5rem;
            transition: color 0.3s ease;
        }

        .footer-section a:hover {
            color: var(--white);
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-bottom: 1rem;
        }

        .contact-icon {
            width: 20px;
            height: 20px;
            background: var(--maroon-primary);
            border-radius: 4px;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid var(--maroon-primary);
            color: var(--neutral-light);
        }

        /* Loading Skeleton */
        .skeleton {
            animation: skeleton-loading 1.5s infinite ease-in-out;
        }

        @keyframes skeleton-loading {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        /* Mobile Responsive */
        @media (max-width: 968px) {
            nav ul {
                position: fixed;
                top: 80px;
                right: -100%;
                width: 100%;
                max-width: 400px;
                height: calc(100vh - 80px);
                background: var(--white);
                flex-direction: column;
                padding: 2rem;
                box-shadow: -5px 0 20px rgba(34, 7, 7, 0.1);
                transition: right 0.4s ease;
                gap: 1.5rem;
            }

            nav ul.active {
                right: 0;
            }

            .hamburger {
                display: flex;
            }

            .page-header h1 {
                font-size: 2.5rem;
            }

            .page-header p {
                font-size: 1.1rem;
            }

            .staff-grid {
                grid-template-columns: 1fr;
            }

            .leadership-grid {
                grid-template-columns: 1fr;
            }

            .intro-section h2 {
                font-size: 2rem;
            }

            .intro-section p {
                font-size: 1rem;
            }
        }

        @media (max-width: 640px) {
            .nav-container {
                padding: 1rem;
            }

            .school-name {
                font-size: 1rem;
            }

            .page-header {
                padding: 3rem 1rem;
            }

            .page-header h1 {
                font-size: 2rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .stat-number {
                font-size: 2.5rem;
            }

            .filter-btn {
                padding: 0.6rem 1.5rem;
                font-size: 0.9rem;
            }

            .staff-image {
                height: 280px;
            }
        }

        html {
            scroll-behavior: smooth;
        }


        /* Advanced Filter Controls */
.filter-section {
    max-width: 1200px;
    margin: 2rem auto;
    padding: 2rem;
    background: var(--white);
    border-radius: 12px;
    box-shadow: 0 5px 20px rgba(34, 7, 7, 0.08);
}

.filter-controls {
    display: flex;
    gap: 1.5rem;
    flex-wrap: wrap;
    align-items: flex-end;
    justify-content: center;
}

.filter-dropdown {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    min-width: 200px;
}

.filter-dropdown label {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--maroon-dark);
}

.filter-select {
    padding: 0.8rem 1rem;
    border: 2px solid var(--neutral-light);
    border-radius: 8px;
    font-size: 1rem;
    color: var(--maroon-dark);
    background: var(--bg-light);
    cursor: pointer;
    transition: all 0.3s ease;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23531C22' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 1rem center;
    padding-right: 2.5rem;
}

.filter-select:hover {
    border-color: var(--maroon-primary);
}

.filter-select:focus {
    outline: none;
    border-color: var(--maroon-primary);
    box-shadow: 0 0 0 3px rgba(83, 28, 34, 0.1);
}

.filter-reset-btn {
    padding: 0.8rem 2rem;
    background: var(--maroon-primary);
    color: var(--white);
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    height: fit-content;
}

.filter-reset-btn:hover {
    background: var(--maroon-dark);
    transform: translateY(-2px);
}

/* Section Headers */
.staff-section-header {
    text-align: center;
    font-size: 2rem;
    color: var(--maroon-dark);
    margin: 3rem 0 2rem 0;
    padding-bottom: 1rem;
    border-bottom: 3px solid var(--maroon-primary);
    position: relative;
}

.staff-section-header::after {
    content: '';
    position: absolute;
    bottom: -3px;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 3px;
    background: var(--maroon-dark);
}

@media (max-width: 768px) {
    .filter-controls {
        flex-direction: column;
        align-items: stretch;
    }

    .filter-dropdown {
        min-width: 100%;
    }

    .filter-reset-btn {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="nav-container">
            <div class="logo-section">
                <div class="logo-placeholder">HCC</div>
                <div>
                    <div class="school-name">HCC High School</div>
                    <div class="school-location">Solapur</div>
                </div>
            </div>
            
            <nav>
                <ul id="navMenu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="staff.html" class="active">Staff</a></li>
                    <li><a href="admission.html">Admission</a></li>
                    <li><a href="infrastructure.html">Infrastructure</a></li>
                    <li><a href="gallery.html">Image Gallery</a></li>
                    <li><a href="achievements.html">Achievements</a></li>
                    <li><a href="notices.html" class="active">Notices</a></li>
                </ul>
            </nav>

            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </header>

    <!-- Page Header -->
    <div class="page-header">
        <h1>Meet Our Exceptional Faculty</h1>
        <p>Experienced educators dedicated to nurturing academic excellence, character development, and lifelong learning in every student</p>
    </div>

    <!-- Introduction Section -->
    <section class="intro-section">
        <h2>The Heart of Our Institution</h2>
        <p>At HCC High School, we believe that great teachers create great futures. Our faculty represents the cornerstone of our educational philosophy, bringing together decades of combined teaching experience, advanced academic qualifications, and an unwavering commitment to student success. Each member of our team is carefully selected not just for their subject expertise, but for their ability to inspire curiosity, foster critical thinking, and create a nurturing learning environment where every student can thrive.</p>
    </section>

    <!-- Leadership Section -->
    <section class="leadership-section">
        <div class="leadership-container">
            <h2 class="section-title">Our Leadership Team</h2>
            <div class="leadership-grid">
                <div class="leader-card" id="principalCard">
    <!-- Will be loaded from Supabase -->
</div>


               <!-- <div class="leader-card" id="vicePrincipalCard">
    
</div> -->

            </div>
        </div>
    </section>

    <!-- Filter Buttons -->
    <!-- Advanced Filter Section -->
<div class="filter-section">
    <div class="filter-controls">
        <div class="filter-dropdown">
            <label for="filterType">Filter By:</label>
            <select id="filterType" class="filter-select">
                <option value="all">All Staff</option>
                <option value="subject">By Subject</option>
                <option value="class">By Class</option>
            </select>
        </div>

        <div class="filter-dropdown" id="subjectFilterContainer" style="display: none;">
            <label for="subjectFilter">Select Subject:</label>
            <select id="subjectFilter" class="filter-select">
                <option value="">-- Select Subject --</option>
            </select>
        </div>

        <div class="filter-dropdown" id="classFilterContainer" style="display: none;">
            <label for="classFilter">Select Class:</label>
            <select id="classFilter" class="filter-select">
                <option value="">-- Select Class --</option>
            </select>
        </div>

        <button class="filter-reset-btn" id="resetFilter">Reset Filters</button>
    </div>
</div>


    <!-- Staff Grid -->
    <section class="staff-section">
        <div class="staff-grid" id="staffGrid">
            <!-- Staff cards will be dynamically loaded from Supabase -->
            <!-- Loading placeholder will show until data loads -->
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats-section">
        <div class="stats-container">
            <div class="stat-item">
                <div class="stat-number">50+</div>
                <div class="stat-label">Expert Faculty Members</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">18</div>
                <div class="stat-label">Average Years Experience</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">95%</div>
                <div class="stat-label">Postgraduate Qualified</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">100%</div>
                <div class="stat-label">Professionally Trained</div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-section">
                <h3>HCC High School</h3>
                <p>Excellence in education since 1990</p>
                <p>Shaping young minds for a brighter tomorrow</p>
            </div>

            <div class="footer-section">
                <h3>Quick Links</h3>
                <a href="about.html">About Us</a>
                <a href="admission.html">Admissions</a>
                <a href="staff.html">Faculty</a>
                <a href="achievements.html">Achievements</a>
            </div>

            <div class="footer-section">
                <h3>Contact Information</h3>
                <div class="contact-item">
                    <div class="contact-icon"></div>
                    <span>123 School Road, Solapur, Maharashtra</span>
                </div>
                <div class="contact-item">
                    <div class="contact-icon"></div>
                    <span>+91 1234567890</span>
                </div>
                <div class="contact-item">
                    <div class="contact-icon"></div>
                    <span>info@hccschool.edu.in</span>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2026 HCC High School, Solapur. All rights reserved.</p>
        </div>
    </footer>

        <!-- Supabase JS Library - Load ONCE -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

   <script>
    // ============================================
    // SUPABASE CONFIGURATION
    // ============================================
    const SUPABASE_URL = 'https://tqpjyqrlawhjuzugosyh.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRxcGp5cXJsYXdoanV6dWdvc3loIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxOTI4NzQsImV4cCI6MjA4NTc2ODg3NH0.Qsajz9iar_Qu0N7UHTm5ltjnUtVzNSpapJf1xnqGJLQ';

    const { createClient } = supabase;
    const supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    // Global state
    let allStaff = [];
    let uniqueSubjects = new Set();
    let uniqueClasses = new Set();

    // ============================================
    // LOAD STAFF DATA FROM SUPABASE
    // ============================================
    async function loadStaffData() {
        try {
            const { data: staff, error } = await supabaseClient
                .from('staff')
                .select('*')
                .eq('is_visible', true)
                .order('display_order', { ascending: true });

            if (error) {
                console.error('Error loading staff:', error);
                showErrorMessage();
                return;
            }

            if (staff && staff.length > 0) {
                allStaff = staff;
                extractFilters(staff);
                populateFilterDropdowns();
                renderStaffHierarchy(staff);
            } else {
                showEmptyState();
            }
        } catch (err) {
            console.error('Failed to fetch staff:', err);
            showErrorMessage();
        }
    }

    // ============================================
    // EXTRACT UNIQUE SUBJECTS AND CLASSES
    // ============================================
    function extractFilters(staffData) {
        uniqueSubjects.clear();
        uniqueClasses.clear();

        staffData.forEach(member => {
            if (member.subject) {
                uniqueSubjects.add(member.subject);
            }
            if (member.class_taught) {
                // Split by comma and clean each class
                const classes = member.class_taught
                    .split(',')
                    .map(c => c.trim())
                    .map(c => {
                        // Remove "Class" prefix if exists
                        c = c.replace(/class\s*/gi, '');
                        // Ensure "th" suffix
                        if (!c.match(/th|st|nd|rd$/i)) {
                            c += 'th';
                        }
                        return c;
                    });
                
                classes.forEach(c => uniqueClasses.add(c));
            }
        });
    }

    // ============================================
    // POPULATE FILTER DROPDOWNS
    // ============================================
    function populateFilterDropdowns() {
    const subjectFilter = document.getElementById('subjectFilter');
    const classFilter = document.getElementById('classFilter');

    // Clear existing options
    subjectFilter.innerHTML = '<option value="">-- All Subjects --</option>';
    classFilter.innerHTML = '<option value="">-- All Classes --</option>';

    // Add subject options (alphabetically sorted)
    Array.from(uniqueSubjects).sort().forEach(subject => {
        const option = document.createElement('option');
        option.value = subject;
        option.textContent = subject;
        subjectFilter.appendChild(option);
    });

    // Add class options (sorted numerically with null check)
    Array.from(uniqueClasses)
        .filter(c => c && c.trim() !== '') // Remove empty values
        .sort((a, b) => {
            // Extract number from "9th" -> 9
            const matchA = a.match(/\d+/);
            const matchB = b.match(/\d+/);
            
            // If no number found, put at end
            if (!matchA) return 1;
            if (!matchB) return -1;
            
            const numA = parseInt(matchA[0]);
            const numB = parseInt(matchB[0]);
            return numA - numB;
        })
        .forEach(className => {
            const option = document.createElement('option');
            option.value = className;
            option.textContent = className;
            classFilter.appendChild(option);
        });
}

    // ============================================
    // RENDER STAFF HIERARCHY (PRINCIPAL FIRST, THEN OTHERS)
    // ============================================
    function renderStaffHierarchy(staffData) {
        const staffGrid = document.getElementById('staffGrid');
        staffGrid.innerHTML = '';

        // Separate leadership from regular staff
        const principal = staffData.find(member => 
            member.designation && member.designation.toLowerCase() === 'principal'
        );
        
        const vicePrincipal = staffData.find(member => 
            member.designation && member.designation.toLowerCase() === 'vice principal'
        );

        const regularStaff = staffData.filter(member => 
            member !== principal && member !== vicePrincipal
        );

        // Load leadership into dedicated cards in HTML
        if (principal) {
            loadLeadershipCard('principalCard', principal);
        }
        if (vicePrincipal) {
            loadLeadershipCard('vicePrincipalCard', vicePrincipal);
        }

        // Render Regular Staff Section
        if (regularStaff.length > 0) {
            const staffHeader = document.createElement('h3');
            staffHeader.className = 'staff-section-header';
            staffHeader.textContent = 'Faculty Members';
            staffGrid.appendChild(staffHeader);

            regularStaff.forEach(member => {
                const card = createStaffCard(member);
                staffGrid.appendChild(card);
            });
        } else {
            // Show empty state if no regular staff match filters
            const emptyMessage = document.createElement('div');
            emptyMessage.style.cssText = 'grid-column: 1 / -1; text-align: center; padding: 4rem 2rem;';
            emptyMessage.innerHTML = `
                <h3 style="font-size: 1.5rem; color: var(--neutral-warm); margin-bottom: 1rem;">
                    No staff members found for this filter
                </h3>
                <p style="color: var(--neutral-warm);">
                    Try selecting a different option or reset filters.
                </p>
            `;
            staffGrid.appendChild(emptyMessage);
        }
    }

    // ============================================
    // LOAD LEADERSHIP CARD (PRINCIPAL/VP)
    // ============================================
    function loadLeadershipCard(cardId, member) {
        const card = document.getElementById(cardId);
        if (!card) return;

        card.innerHTML = `
            <div class="leader-image">
                ${member.photo_url ? 
                    `<img src="${member.photo_url}" alt="${member.full_name}" loading="lazy">` 
                    : 
                    `<div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 3rem; color: white; font-weight: bold; background: linear-gradient(135deg, #E7D8CA, #AC9185); border-radius: 50%;">
                        ${member.full_name.charAt(0)}
                    </div>`
                }
            </div>
            <h3 class="leader-name">${member.full_name}</h3>
            <p class="leader-title">${member.designation}</p>
            <p class="leader-bio">${member.education || member.qualification || 'Dedicated educational leader committed to excellence.'}</p>
        `;
    }

    // ============================================
    // CREATE INDIVIDUAL STAFF CARD
    // ============================================
    function createStaffCard(member) {
        const card = document.createElement('div');
        card.className = 'staff-card';
        card.setAttribute('data-subject', member.subject || '');
        card.setAttribute('data-class', member.class_taught || '');

        card.innerHTML = `
            <div class="staff-image">
                ${member.photo_url ? 
                    `<img src="${member.photo_url}" 
                          alt="${member.full_name}" 
                          loading="lazy"
                          onerror="this.parentElement.innerHTML='<div style=\\'width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 4rem; color: white; font-weight: bold;\\'>${member.full_name.charAt(0)}</div><span class=\\'staff-badge\\'>${member.designation || 'Teacher'}</span>'">` 
                    : 
                    `<div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 4rem; color: white; font-weight: bold;">
                        ${member.full_name.charAt(0)}
                    </div>`
                }
                <span class="staff-badge">${member.designation || 'Teacher'}</span>
            </div>
            <div class="staff-info">
                <h3 class="staff-name">${member.full_name}</h3>
                <p class="staff-designation">${member.subject || 'Faculty Member'}</p>
                <div class="staff-details">
                    ${member.subject ? `
                        <div class="detail-item">
                            <div class="detail-icon"></div>
                            <span>Subject: ${member.subject}</span>
                        </div>
                    ` : ''}
                    ${member.class_taught ? `
                        <div class="detail-item">
                            <div class="detail-icon"></div>
                            <span>Classes: ${formatClasses(member.class_taught)}</span>
                        </div>
                    ` : ''}
                    ${member.qualification ? `
                        <div class="detail-item">
                            <div class="detail-icon"></div>
                            <span>Qualification: ${member.qualification}</span>
                        </div>
                    ` : ''}
                    ${member.experience_years ? `
                        <div class="detail-item">
                            <div class="detail-icon"></div>
                            <span>Experience: ${member.experience_years} Years</span>
                        </div>
                    ` : ''}
                </div>
                ${member.bio ? `
                    <p class="staff-bio">${member.bio}</p>
                ` : ''}
            </div>
        `;

        return card;
    }

    // ============================================
    // FORMAT CLASSES (9th, 10th instead of Class 9)
    // ============================================
    function formatClasses(classString) {
        if (!classString) return '';
        
        // Split by comma and format each
        return classString
            .split(',')
            .map(c => c.trim())
            .map(c => {
                // Remove "Class" prefix if exists
                c = c.replace(/class\s*/gi, '');
                // Add "th" suffix if not present
                if (!c.match(/th|st|nd|rd$/i)) {
                    c += 'th';
                }
                return c;
            })
            .join(', ');
    }

    // ============================================
    // EMPTY STATE & ERROR HANDLING
    // ============================================
    function showEmptyState() {
        const staffGrid = document.getElementById('staffGrid');
        staffGrid.innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 4rem 2rem;">
                <h3 style="font-size: 1.5rem; color: var(--neutral-warm); margin-bottom: 1rem;">
                    No staff members found
                </h3>
                <p style="color: var(--neutral-warm);">
                    Staff information will be updated soon.
                </p>
            </div>
        `;
    }

    function showErrorMessage() {
        const staffGrid = document.getElementById('staffGrid');
        staffGrid.innerHTML = `
            <div style="grid-column: 1 / -1; text-align: center; padding: 4rem 2rem;">
                <h3 style="font-size: 1.5rem; color: var(--maroon-primary); margin-bottom: 1rem;">
                    Unable to load staff information
                </h3>
                <p style="color: var(--neutral-warm); margin-bottom: 1.5rem;">
                    Please check your internet connection and try again.
                </p>
                <button onclick="loadStaffData()" 
                        style="padding: 0.8rem 2rem; background: var(--maroon-primary); 
                               color: white; border: none; border-radius: 8px; cursor: pointer; 
                               font-size: 1rem; font-weight: 600;">
                    Retry
                </button>
            </div>
        `;
    }

    // ============================================
    // FILTER FUNCTIONALITY
    // ============================================
    const filterType = document.getElementById('filterType');
    const subjectFilterContainer = document.getElementById('subjectFilterContainer');
    const classFilterContainer = document.getElementById('classFilterContainer');
    const subjectFilter = document.getElementById('subjectFilter');
    const classFilter = document.getElementById('classFilter');
    const resetFilterBtn = document.getElementById('resetFilter');

    // Show/hide filter dropdowns based on selection
    filterType.addEventListener('change', (e) => {
        const selected = e.target.value;

        subjectFilterContainer.style.display = 'none';
        classFilterContainer.style.display = 'none';

        if (selected === 'subject') {
            subjectFilterContainer.style.display = 'flex';
        } else if (selected === 'class') {
            classFilterContainer.style.display = 'flex';
        }

        // Reset filters
        subjectFilter.value = '';
        classFilter.value = '';
        applyFilters();
    });

    // Apply subject filter
    subjectFilter.addEventListener('change', applyFilters);

    // Apply class filter
    classFilter.addEventListener('change', applyFilters);

    // Reset filters
    resetFilterBtn.addEventListener('click', () => {
        filterType.value = 'all';
        subjectFilter.value = '';
        classFilter.value = '';
        subjectFilterContainer.style.display = 'none';
        classFilterContainer.style.display = 'none';
        applyFilters();
    });

    // ============================================
    // APPLY FILTERS
    // ============================================
    function applyFilters() {
        const filterMode = filterType.value;
        const selectedSubject = subjectFilter.value;
        const selectedClass = classFilter.value;

        // Exclude Principal and VP from regular staff display
        let filteredStaff = allStaff.filter(member => 
            member.designation && 
            member.designation.toLowerCase() !== 'principal' && 
            member.designation.toLowerCase() !== 'vice principal'
        );

        // Apply subject filter
        if (filterMode === 'subject' && selectedSubject) {
            filteredStaff = filteredStaff.filter(member => 
                member.subject === selectedSubject
            );
        } 
        // Apply class filter
        else if (filterMode === 'class' && selectedClass) {
            filteredStaff = filteredStaff.filter(member => {
                if (!member.class_taught) return false;
                
                // Split and normalize classes
                const classes = member.class_taught
                    .split(',')
                    .map(c => c.trim())
                    .map(c => {
                        // Remove "Class" prefix if exists
                        c = c.replace(/class\s*/gi, '');
                        // Ensure "th" suffix
                        if (!c.match(/th|st|nd|rd$/i)) {
                            c += 'th';
                        }
                        return c;
                    });
                
                // Check if selected class matches any of the staff's classes
                return classes.includes(selectedClass);
            });
        }

        // Re-render with filtered staff
        renderStaffHierarchy(filteredStaff);
    }

    // ============================================
    // MOBILE MENU & HEADER SCROLL
    // ============================================
    const hamburger = document.getElementById('hamburger');
    const navMenu = document.getElementById('navMenu');

    hamburger.addEventListener('click', () => {
        hamburger.classList.toggle('active');
        navMenu.classList.toggle('active');
    });

    document.addEventListener('click', (e) => {
        if (!hamburger.contains(e.target) && !navMenu.contains(e.target)) {
            hamburger.classList.remove('active');
            navMenu.classList.remove('active');
        }
    });

    let lastScroll = 0;
    const header = document.querySelector('header');

    window.addEventListener('scroll', () => {
        const currentScroll = window.pageYOffset;
        
        if (currentScroll <= 0) {
            header.style.transform = 'translateY(0)';
            return;
        }
        
        if (currentScroll > lastScroll && currentScroll > 80) {
            header.style.transform = 'translateY(-100%)';
        } else {
            header.style.transform = 'translateY(0)';
        }
        
        lastScroll = currentScroll;
    });

    // ============================================
    // INITIALIZE
    // ============================================
    window.addEventListener('DOMContentLoaded', () => {
        loadStaffData();
    });
</script>

</body>
</html>
